<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>AI DJ Hip-Hop Remixer</title><script src="https://cdn.tailwindcss.com"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"><link rel="stylesheet" href="styles.css"><style>body{font-family:Inter,sans-serif;background-color:#1a202c;color:#e2e8f0;display:flex;justify-content:center;align-items:flex-start;min-height:100vh;padding:20px;box-sizing:border-box}.container{background-color:#2d3748;padding:30px;border-radius:15px;box-shadow:0 10px 20px rgba(0,0,0,.4);width:100%;max-width:900px;text-align:center;border:1px solid #4a5568}h1{font-size:2.5rem;font-weight:700;margin-bottom:25px;color:#63b3ed}.controls-section,.input-section,.message-box{background-color:#4a5568;padding:20px;border-radius:10px;margin-bottom:20px;border:1px solid #63b3ed}input[type=file]{display:none}.custom-file-upload{border:2px dashed #a0aec0;padding:15px 20px;border-radius:8px;cursor:pointer;display:inline-block;margin-top:10px;color:#a0aec0;transition:background-color .2s,border-color .2s}.custom-file-upload:hover{background-color:#2d3748;border-color:#63b3ed;color:#63b3ed}.file-list{margin-top:15px;text-align:left;max-height:150px;overflow-y:auto;border:1px solid #63b3ed;border-radius:8px;padding:10px;background-color:#2d3748}.file-item{display:flex;justify-content:space-between;align-items:center;padding:8px 0;border-bottom:1px solid #4a5568}.file-item:last-child{border-bottom:none}.file-item span{flex-grow:1;margin-right:10px;color:#cbd5e0}.remove-file-btn{background-color:#e53e3e;color:#fff;border:none;border-radius:5px;padding:5px 8px;cursor:pointer;font-size:.8rem;transition:background-color .2s}.remove-file-btn:hover{background-color:#c53030}button{background-color:#63b3ed;color:#fff;padding:12px 25px;border:none;border-radius:8px;cursor:pointer;font-size:1.1rem;font-weight:700;margin:10px 5px;transition:background-color .2s,transform .1s,box-shadow .2s;box-shadow:0 4px 6px rgba(0,0,0,.2)}button:hover{background-color:#4299e1;transform:translateY(-2px);box-shadow:0 6px 8px rgba(0,0,0,.3)}button:disabled{background-color:#4a5568;cursor:not-allowed;box-shadow:none;transform:none}.message-box{min-height:50px;display:flex;align-items:center;justify-content:center;color:#cbd5e0;font-size:1rem;font-style:italic}.slider-group{margin-bottom:15px;text-align:left;padding:0 10px}.slider-group label{display:block;margin-bottom:5px;font-weight:700;color:#cbd5e0}.slider-group input[type=range]{width:100%;-webkit-appearance:none;appearance:none;height:8px;background:#2d3748;border-radius:5px;outline:0;transition:background .2s;margin-top:5px}.slider-group input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:20px;height:20px;border-radius:50%;background:#63b3ed;cursor:pointer;box-shadow:0 2px 4px rgba(0,0,0,.3)}.slider-group input[type=range]::-moz-range-thumb{width:20px;height:20px;border-radius:50%;background:#63b3ed;cursor:pointer;box-shadow:0 2px 4px rgba(0,0,0,.3)}.slider-group span{float:right;font-weight:400;color:#a0aec0}.input-url{width:70%;padding:10px;border-radius:6px;border:1px solid #63b3ed;background:#2d3748;color:#e2e8f0}.submit-url-btn{margin-left:10px;background-color:#63b3ed;color:#fff;padding:12px 25px;border:none;border-radius:8px;cursor:pointer;font-size:1.1rem;font-weight:700;transition:background-color .2s,transform .1s,box-shadow .2s;box-shadow:0 4px 6px rgba(0,0,0,.2)}.submit-url-btn:hover{background-color:#4299e1;transform:translateY(-2px);box-shadow:0 6px 8px rgba(0,0,0,.3)}</style><script defer="defer" src="/static/js/main.c4b423d4.js"></script></head><body><div class="container"><h1>AI DJ Hip-Hop Remixer</h1><div class="message-box" id="messageBox">Upload some audio files to get started!</div><div class="input-section"><h2 class="text-xl font-semibold mb-4 text-white">1. Upload Your Audio Samples</h2><p class="text-sm text-gray-400 mb-4">(MP3, WAV, OGG supported. Multiple files are encouraged for more variety.)</p><label for="audioFileInput" class="custom-file-upload"><i class="fas fa-cloud-upload-alt mr-2"></i> Choose Audio Files</label> <input type="file" id="audioFileInput" accept=".mp3,.wav,.ogg" multiple="multiple"><div id="fileList" class="file-list hidden"></div><div class="mt-6"><input id="audioUrlInput" class="input-url" placeholder="Paste audio or YouTube URL here..."/> <button id="submitUrlBtn" class="submit-url-btn"><i class="fas fa-link mr-2"></i>Submit URL</button></div></div><div class="controls-section"><h2 class="text-xl font-semibold mb-4 text-white">2. Remix Controls</h2><div class="flex flex-wrap justify-center items-center mb-4"><button id="generateRemixBtn" disabled="disabled"><i class="fas fa-magic mr-2"></i> Generate Remix</button> <button id="playBtn" disabled="disabled"><i class="fas fa-play mr-2"></i> Play Remix</button> <button id="stopBtn" disabled="disabled"><i class="fas fa-stop mr-2"></i> Stop Playback</button> <button id="downloadBtn" disabled="disabled"><i class="fas fa-download mr-2"></i> Download Remix</button></div><div class="slider-group"><label for="tempoSlider">Tempo (BPM): <span id="tempoValue">100</span></label> <input type="range" id="tempoSlider" min="60" max="180" value="100"></div><div class="slider-group"><label for="samplePitchSlider">Sample Pitch Shift: <span id="samplePitchValue">0</span> semitones</label> <input type="range" id="samplePitchSlider" min="-12" max="12" value="0"></div><div class="slider-group"><label for="effectMixSlider">Effect Mix (Reverb): <span id="effectMixValue">0</span>%</label> <input type="range" id="effectMixSlider" min="0" max="100" value="0"></div><div class="flex flex-wrap justify-center mt-4"><button id="regenerateBtn" disabled="disabled"><i class="fas fa-redo-alt mr-2"></i> Regenerate (New)</button> <button id="saveVersionBtn" disabled="disabled"><i class="fas fa-save mr-2"></i> Save Current</button> <button id="loadVersionBtn" disabled="disabled"><i class="fas fa-folder-open mr-2"></i> Load Version</button></div><div id="versionList" class="file-list hidden mt-4"></div></div></div><script type="module">const appId="undefined"!=typeof __app_id?__app_id:"default-app-id",firebaseConfig="undefined"!=typeof __firebase_config?JSON.parse(__firebase_config):{},initialAuthToken="undefined"!=typeof __initial_auth_token?__initial_auth_token:null;let audioContext,masterGainNode,analyserNode,reverbNode,impulseResponseBuffer=null,currentPlaybackSource=null,mediaRecorder=null,recordedChunks=[];const messageBox=document.getElementById("messageBox"),audioFileInput=document.getElementById("audioFileInput"),fileListDiv=document.getElementById("fileList"),generateRemixBtn=document.getElementById("generateRemixBtn"),playBtn=document.getElementById("playBtn"),stopBtn=document.getElementById("stopBtn"),downloadBtn=document.getElementById("downloadBtn"),tempoSlider=document.getElementById("tempoSlider"),tempoValueSpan=document.getElementById("tempoValue"),samplePitchSlider=document.getElementById("samplePitchSlider"),samplePitchValueSpan=document.getElementById("samplePitchValue"),effectMixSlider=document.getElementById("effectMixSlider"),effectMixValueSpan=document.getElementById("effectMixValue"),regenerateBtn=document.getElementById("regenerateBtn"),saveVersionBtn=document.getElementById("saveVersionBtn"),loadVersionBtn=document.getElementById("loadVersionBtn"),versionListDiv=document.getElementById("versionList"),audioUrlInput=document.getElementById("audioUrlInput"),submitUrlBtn=document.getElementById("submitUrlBtn");let loadedAudioBuffers=[],remixScheduledNodes=[],currentRemixDuration=0,currentRemixParameters={},savedRemixVersions=[];function showMessage(e,t="info"){messageBox.textContent=e,messageBox.className="message-box "+("error"===t?"text-red-400":"success"===t?"text-green-400":"text-blue-400")}function initAudioContext(){audioContext||(audioContext=new(window.AudioContext||window.webkitAudioContext),masterGainNode=audioContext.createGain(),masterGainNode.connect(audioContext.destination),analyserNode=audioContext.createAnalyser(),analyserNode.fftSize=2048,masterGainNode.connect(analyserNode),reverbNode=audioContext.createConvolver(),reverbNode.connect(masterGainNode),loadImpulseResponse("https://webaudio.github.io/web-audio-samples/samples/audio/impulse-responses/small-room.wav"),showMessage("Audio system ready. Upload samples!"))}async function loadImpulseResponse(e){try{const t=await fetch(e),a=await t.arrayBuffer();impulseResponseBuffer=await audioContext.decodeAudioData(a),reverbNode.buffer=impulseResponseBuffer,updateEffectMix()}catch(e){console.error("Error loading impulse response:",e),showMessage("Failed to load reverb impulse response.","error")}}function updateEffectMix(){if(!masterGainNode||!reverbNode)return;effectMixSlider.value,effectMixSlider.value;effectMixValueSpan.textContent=effectMixSlider.value}async function handleAudioFileSelect(e){const t=e.target.files;if(0===t.length)return;initAudioContext(),showMessage("Loading audio samples..."),generateRemixBtn.disabled=!0;const a=[];for(let e=0;e<t.length;e++){const n=t[e];if(n.type.startsWith("audio/"))try{const e=await n.arrayBuffer(),t=await audioContext.decodeAudioData(e);a.push({name:n.name,buffer:t}),showMessage(`Loaded: ${n.name}`)}catch(e){console.error("Error decoding audio file:",n.name,e),showMessage(`Failed to load ${n.name}. Is it a valid audio file?`,"error")}else showMessage(`Skipped ${n.name}: Not an audio file.`,"error")}loadedAudioBuffers=loadedAudioBuffers.concat(a),updateFileListUI(),generateRemixBtn.disabled=0===loadedAudioBuffers.length,loadedAudioBuffers.length>0?showMessage(`Loaded ${loadedAudioBuffers.length} samples. Ready to generate!`):showMessage("No valid audio samples loaded. Please try again.")}function updateFileListUI(){fileListDiv.innerHTML="",loadedAudioBuffers.length>0?(fileListDiv.classList.remove("hidden"),loadedAudioBuffers.forEach((e,t)=>{const a=document.createElement("div");a.className="file-item",a.innerHTML=`\n                        <span>${e.name}</span>\n                        <button class="remove-file-btn" data-index="${t}"><i class="fas fa-times"></i></button>\n                    `,fileListDiv.appendChild(a)}),fileListDiv.querySelectorAll(".remove-file-btn").forEach(e=>{e.addEventListener("click",e=>{const t=parseInt(e.target.dataset.index);loadedAudioBuffers.splice(t,1),updateFileListUI(),generateRemixBtn.disabled=0===loadedAudioBuffers.length,0===loadedAudioBuffers.length?(fileListDiv.classList.add("hidden"),showMessage("No samples loaded. Upload some to generate a remix.")):showMessage(`Removed sample. ${loadedAudioBuffers.length} samples remaining.`)})})):fileListDiv.classList.add("hidden")}function createDrumSound(e){const t=audioContext.sampleRate;let a;switch(e){case"kick":a=audioContext.createBuffer(1,.5*t,t);const n=a.getChannelData(0);let i=120;const s=.99,o=.98;let r=1;for(let e=0;e<n.length;e++)n[e]=Math.sin(2*i*Math.PI*e/t)*r,i*=s,r*=o,i<30&&(i=30),r<.001&&(r=0);break;case"snare":a=audioContext.createBuffer(1,.3*t,t);const d=a.getChannelData(0);for(let e=0;e<d.length;e++){let a=2*Math.random()-1,n=Math.sin(1400*Math.PI*e/t);d[e]=(.5*a+.5*n)*(1-e/d.length)}break;case"hihat":a=audioContext.createBuffer(1,.2*t,t);const l=a.getChannelData(0);for(let e=0;e<l.length;e++)l[e]=(2*Math.random()-1)*(1-e/l.length);break;default:return console.warn("Unknown drum type:",e),null}return a}const drumBuffers={kick:createDrumSound("kick"),snare:createDrumSound("snare"),hihat:createDrumSound("hihat")};function scheduleAudioSource(e,t,a,n=0,i=1,s=0){const o=audioContext.createBufferSource();o.buffer=e,o.playbackRate.value=Math.pow(2,n/1200);const r=audioContext.createGain();r.gain.value=1-s,r.connect(masterGainNode);const d=audioContext.createGain();d.gain.value=s,d.connect(reverbNode);const l=audioContext.createGain();return l.gain.value=i,l.connect(r),l.connect(d),o.connect(l),o.start(t,0,a),o}function generateRemix(){if(0===loadedAudioBuffers.length)return void showMessage("Please upload audio samples first!","error");showMessage("Generating remix...","info"),stopPlayback(),remixScheduledNodes=[],currentRemixDuration=0;const e=parseInt(tempoSlider.value),t=60/e,a=parseInt(samplePitchSlider.value),n=parseFloat(effectMixSlider.value)/100;currentRemixParameters={tempo:e,samplePitchShift:a,effectMix:n,seed:Math.random()};const i=4*t;currentRemixDuration=16*i+2;let s=audioContext.currentTime+.1;const o=loadedAudioBuffers.map(e=>e.buffer);if(0===o.length)return void showMessage("No valid samples to remix!","error");const r=Math.min(o.length,3),d=[];for(let e=0;e<r;e++)d.push(o[Math.floor(Math.random()*o.length)]);for(let e=0;e<16;e++){remixScheduledNodes.push(scheduleAudioSource(drumBuffers.kick,s,.3)),remixScheduledNodes.push(scheduleAudioSource(drumBuffers.snare,s+t,.3)),remixScheduledNodes.push(scheduleAudioSource(drumBuffers.kick,s+2*t,.3)),remixScheduledNodes.push(scheduleAudioSource(drumBuffers.snare,s+3*t,.3));for(let e=0;e<8;e++)remixScheduledNodes.push(scheduleAudioSource(drumBuffers.hihat,s+e*t/2,.1,0,.7));d.forEach((e,t)=>{const o=e.duration,r=Math.ceil(i/o);for(let d=0;d<r;d++){const r=d*o;if(r<i){const d=Math.min(o,i-r),l=a+2*t;let u=e;if(Math.random()>.8){const t=audioContext.createBuffer(e.numberOfChannels,e.length,e.sampleRate);for(let a=0;a<e.numberOfChannels;a++){const n=e.getChannelData(a),i=t.getChannelData(a);for(let e=0;e<n.length;e++)i[e]=n[n.length-1-e]}u=t}const c=.8+.4*Math.random();remixScheduledNodes.push(scheduleAudioSource(u,s+r,d,100*l,c,n))}}}),s+=i}showMessage("Remix generated! Click Play to listen."),playBtn.disabled=!1,downloadBtn.disabled=!1,regenerateBtn.disabled=!1,saveVersionBtn.disabled=!1}function playRemix(){if(0===remixScheduledNodes.length)return void showMessage('No remix generated yet. Click "Generate Remix" first!',"error");stopPlayback(),remixScheduledNodes=[];audioContext.currentTime;currentRemixParameters.recipe||(generateRemix(),currentRemixParameters.recipe)?(currentRemixParameters.recipe.forEach(e=>{const t=scheduleAudioSource("drum"===e.type?drumBuffers[e.id]:loadedAudioBuffers[e.id].buffer,audioContext.currentTime+e.relativeTime,e.duration,e.pitchCents,e.gain,e.effectMix);remixScheduledNodes.push(t)}),stopBtn.disabled=!1,playBtn.disabled=!0,generateRemixBtn.disabled=!0,downloadBtn.disabled=!0,regenerateBtn.disabled=!0,saveVersionBtn.disabled=!0,loadVersionBtn.disabled=!0,showMessage("Playing remix..."),setTimeout(()=>{stopPlayback()},1e3*currentRemixDuration)):showMessage("Remix recipe missing. Cannot play.","error")}function stopPlayback(){currentPlaybackSource&&(currentPlaybackSource.stop(),currentPlaybackSource=null),remixScheduledNodes.forEach(e=>{try{e.stop()}catch(e){}e.disconnect()}),remixScheduledNodes=[],audioContext&&"running"===audioContext.state&&audioContext.suspend(),playBtn.disabled=!1,stopBtn.disabled=!0,generateRemixBtn.disabled=0===loadedAudioBuffers.length,downloadBtn.disabled=!1,regenerateBtn.disabled=!1,saveVersionBtn.disabled=!1,loadVersionBtn.disabled=0===savedRemixVersions.length,showMessage("Playback stopped.")}function downloadRemix(){if(0===remixScheduledNodes.length)return void showMessage("No remix to download. Generate one first!","error");stopPlayback(),"suspended"===audioContext.state&&audioContext.resume();const e=audioContext.createMediaStreamDestination();masterGainNode.connect(e),mediaRecorder=new MediaRecorder(e.stream),recordedChunks=[],mediaRecorder.ondataavailable=e=>{e.data.size>0&&recordedChunks.push(e.data)},mediaRecorder.onstop=()=>{const t=new Blob(recordedChunks,{type:"audio/wav"}),a=URL.createObjectURL(t),n=document.createElement("a");n.href=a,n.download=`ai-dj-remix-${Date.now()}.wav`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(a),showMessage("Remix downloaded!","success"),masterGainNode.disconnect(e)},showMessage("Recording remix for download...","info");const t=audioContext.currentTime+.1;remixScheduledNodes=[],currentRemixParameters.recipe.forEach(e=>{const a=scheduleAudioSource("drum"===e.type?drumBuffers[e.id]:loadedAudioBuffers[e.id].buffer,t+e.relativeTime,e.duration,e.pitchCents,e.gain,e.effectMix);remixScheduledNodes.push(a)}),mediaRecorder.start(),setTimeout(()=>{mediaRecorder&&"recording"===mediaRecorder.state&&(mediaRecorder.stop(),stopPlayback())},1e3*currentRemixDuration+500)}function regenerateRemix(){0!==loadedAudioBuffers.length?(generateRemix(),showMessage("New remix generated!","info")):showMessage("Upload samples to regenerate!","error")}function saveCurrentVersion(){if(!currentRemixParameters||0===Object.keys(currentRemixParameters).length)return void showMessage("No remix generated to save yet!","error");const e=prompt("Enter a name for this remix version:");if(e){const t={name:e,id:Date.now(),parameters:JSON.parse(JSON.stringify(currentRemixParameters))};savedRemixVersions.push(t),updateVersionListUI(),showMessage(`Remix version "${e}" saved!`,"success")}else showMessage("Version name cannot be empty.","error")}function loadVersion(e){const t=savedRemixVersions.find(t=>t.id===e);t?(currentRemixParameters=JSON.parse(JSON.stringify(t.parameters)),tempoSlider.value=currentRemixParameters.tempo,tempoValueSpan.textContent=currentRemixParameters.tempo,samplePitchSlider.value=currentRemixParameters.samplePitchShift,samplePitchValueSpan.textContent=currentRemixParameters.samplePitchShift,effectMixSlider.value=100*currentRemixParameters.effectMix,effectMixValueSpan.textContent=effectMixSlider.value,generateRemixFromRecipe(currentRemixParameters),showMessage(`Loaded remix version "${t.name}". Ready to play!`,"success")):showMessage("Version not found.","error")}function updateVersionListUI(){versionListDiv.innerHTML="",savedRemixVersions.length>0?(versionListDiv.classList.remove("hidden"),savedRemixVersions.forEach((e,t)=>{const a=document.createElement("div");a.className="file-item",a.innerHTML=`\n                        <span>${e.name}</span>\n                        <div>\n                            <button class="load-version-btn remove-file-btn" data-id="${e.id}"><i class="fas fa-folder-open"></i> Load</button>\n                            <button class="delete-version-btn remove-file-btn ml-2" data-id="${e.id}"><i class="fas fa-trash"></i></button>\n                        </div>\n                    `,versionListDiv.appendChild(a)}),versionListDiv.querySelectorAll(".load-version-btn").forEach(e=>{e.addEventListener("click",e=>loadVersion(parseInt(e.target.dataset.id)))}),versionListDiv.querySelectorAll(".delete-version-btn").forEach(e=>{e.addEventListener("click",e=>{const t=parseInt(e.target.dataset.id);savedRemixVersions=savedRemixVersions.filter(e=>e.id!==t),updateVersionListUI(),showMessage("Version deleted.","info"),loadVersionBtn.disabled=0===savedRemixVersions.length,0===savedRemixVersions.length&&versionListDiv.classList.add("hidden")})}),loadVersionBtn.disabled=!1):(versionListDiv.classList.add("hidden"),loadVersionBtn.disabled=!0)}function generateRemixFromRecipe(e){stopPlayback(),remixScheduledNodes=[],currentRemixDuration=0;const t=60/e.tempo,a=e.samplePitchShift,n=e.effectMix;let i=e.seed||Math.random();const s=()=>{return e=i++,(t=1e4*Math.sin(e++))-Math.floor(t);var e,t},o=4*t;currentRemixDuration=16*o+2;let r=0;const d=[],l=loadedAudioBuffers.map(e=>e.buffer);if(0===l.length)return void showMessage("No valid samples to remix!","error");const u=Math.min(l.length,3),c=[];for(let e=0;e<u;e++)c.push(Math.floor(s()*l.length));for(let e=0;e<16;e++){d.push({type:"drum",id:"kick",relativeTime:r,duration:.3,pitchCents:0,gain:1,effectMix:n}),d.push({type:"drum",id:"snare",relativeTime:r+t,duration:.3,pitchCents:0,gain:1,effectMix:n}),d.push({type:"drum",id:"kick",relativeTime:r+2*t,duration:.3,pitchCents:0,gain:1,effectMix:n}),d.push({type:"drum",id:"snare",relativeTime:r+3*t,duration:.3,pitchCents:0,gain:1,effectMix:n});for(let e=0;e<8;e++)d.push({type:"drum",id:"hihat",relativeTime:r+e*t/2,duration:.1,pitchCents:0,gain:.7,effectMix:n});c.forEach((e,t)=>{const i=loadedAudioBuffers[e].buffer.duration,l=Math.ceil(o/i);for(let u=0;u<l;u++){const l=u*i;if(l<o){const u=Math.min(i,o-l),c=a+2*t;let m=!1;s()>.8&&(m=!0);const f=.8+.4*s();d.push({type:"sample",id:e,relativeTime:r+l,duration:u,pitchCents:100*c,gain:f,effectMix:n,isReversed:m})}}}),r+=o}currentRemixParameters.recipe=d,showMessage("Remix generated (or re-generated)! Click Play to listen."),playBtn.disabled=!1,downloadBtn.disabled=!1,regenerateBtn.disabled=!1,saveVersionBtn.disabled=!1}window.addEventListener("load",()=>{initAudioContext(),updateVersionListUI()}),audioFileInput.addEventListener("change",handleAudioFileSelect),generateRemixBtn.addEventListener("click",()=>{const e={tempo:parseInt(tempoSlider.value),samplePitchShift:parseInt(samplePitchSlider.value),effectMix:parseFloat(effectMixSlider.value)/100,seed:Math.random()};currentRemixParameters=e,generateRemixFromRecipe(currentRemixParameters)}),playBtn.addEventListener("click",playRemix),stopBtn.addEventListener("click",stopPlayback),downloadBtn.addEventListener("click",downloadRemix),tempoSlider.addEventListener("input",()=>{tempoValueSpan.textContent=tempoSlider.value,generateRemixBtn.disabled=0===loadedAudioBuffers.length,showMessage("Adjust tempo. Click Generate Remix to apply changes.")}),samplePitchSlider.addEventListener("input",()=>{samplePitchValueSpan.textContent=samplePitchSlider.value,generateRemixBtn.disabled=0===loadedAudioBuffers.length,showMessage("Adjust pitch. Click Generate Remix to apply changes.")}),effectMixSlider.addEventListener("input",()=>{effectMixValueSpan.textContent=effectMixSlider.value,generateRemixBtn.disabled=0===loadedAudioBuffers.length,showMessage("Adjust reverb. Click Generate Remix to apply changes."),updateEffectMix()}),regenerateBtn.addEventListener("click",regenerateRemix),saveVersionBtn.addEventListener("click",saveCurrentVersion),loadVersionBtn.addEventListener("click",()=>{versionListDiv.classList.toggle("hidden"),versionListDiv.classList.contains("hidden")?showMessage("Version list hidden.","info"):showMessage("Select a version to load.","info")}),submitUrlBtn.addEventListener("click",async()=>{const e=audioUrlInput.value.trim();if(e){showMessage("Sending URL to backend...");try{const t=await fetch("https://flask-app-py4i444vwa-ue.a.run.app/process_url",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e})}),a=await t.json();t.ok?showMessage(a.message||"URL processed successfully!","success"):showMessage(a.error||"Failed to process URL.","error")}catch(e){showMessage("Error connecting to backend.","error")}}else showMessage("Please enter a valid URL.","error")}),stopBtn.disabled=!0,downloadBtn.disabled=!0,regenerateBtn.disabled=!0,saveVersionBtn.disabled=!0,loadVersionBtn.disabled=!0</script></body></html>